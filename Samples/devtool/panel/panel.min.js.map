{"version":3,"sources":["webpack:///webpack/bootstrap 5e8ae4cf75a838e6ea57","webpack:///./panel/script/EventDispatcher.js","webpack:///./panel/script/History.js","webpack:///./panel/script/index.js","webpack:///./panel/script/MemoryBlock.js","webpack:///./panel/script/Connection.js","webpack:///./panel/script/HistoryPanel.js","webpack:///./panel/script/Panel.js","webpack:///./panel/script/PrestacesPanel.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","__webpack_exports__","[object Object]","this","events","event","func","oldFunc","values","__WEBPACK_IMPORTED_MODULE_0__EventDispatcher__","__WEBPACK_IMPORTED_MODULE_1__MemoryBlock__","super","maxItems","history","disabled","change","prestances","element","length","splice","push","time","Date","calculate","index","parseInt","item","moveHeader","console","log","find","value","__WEBPACK_IMPORTED_MODULE_0__History__","__WEBPACK_IMPORTED_MODULE_1__Connection__","__WEBPACK_IMPORTED_MODULE_2__HistoryPanel__","__WEBPACK_IMPORTED_MODULE_3__Panel__","__WEBPACK_IMPORTED_MODULE_4__PrestacesPanel__","historyPanel","prestancesPanel","connection","panel","registerEvent","update","bind","updateMemoryField","drawTable","updateValues","changeMark","add","clear","deleteHistory","applyPrestances","activeMarks","sendMark","sendConnect","restoreScores","begin","MemoryBlock","obj","bytes","undefined","objClass","toString","slice","key","sizeOf","toFixed","size","formatByteSize","tabId","chrome","devtools","inspectedWindow","init","port","runtime","connect","updating","initValues","reciveMark","onReceiveUpdate","onMessage","addListener","message","target","action","receiveUpdate","post","postMessage","sendMessage","detail","detailJSON","JSON","parse","send","templateTimemachine","document","getElementById","innerHTML","content","onApply","onRestore","addEventListener","e","srcElement","hasAttribute","toItem","getAttribute","getItem","htmlCode","replace","toTimeString","getList","map","generateHistoryItem","join","onMarkChange","onDeleteHistory","onConnect","onActiveMarksChange","onMouseOver","onMouseOut","checked","classList","remove","getConsumedMemory","el","templateItem","templateList","container","loader","list","id","generateItem","prestance","children","getPrestace","generateList","reduce","prev","flatTree","valueList","minVal","a","b","Math","min","maxVal","max","arrowEl","color","style","prevValue","parseFloat"],"mappings":"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","file":"./panel/panel.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 5e8ae4cf75a838e6ea57","class EventDispatcher {\n    constructor() {\n        this.events = {}\n    }\n\n    registerEvent(event, func) {\n        if (!this.events) {\n            this.events = {}\n        }\n\n        if (!this.events[event]) {\n            this.events[event] = func\n            return\n        }\n        const oldFunc = this.events[event]\n        this.events[event] = (values) => {\n            oldFunc(values)\n            func(values)\n        }\n    }\n}\n\nexport default EventDispatcher\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./panel/script/EventDispatcher.js\n// module id = 0\n// module chunks = 0","import EventDispatcher from './EventDispatcher'\nimport MemoryBlock from './MemoryBlock'\n\nclass History extends EventDispatcher {\n    constructor () {\n      super()\n      this.maxItems = 50\n      this.history = []\n      this.disabled = false\n      this.events = {\n        change: () => {},\n      }\n    }\n  \n    disable (disabled = true) {\n      this.disabled = disabled\n    }\n  \n    add ({event, prestances, element}) {\n      if (!this.disabled) {\n        if (this.maxItems) {\n          if (this.history.length >= this.maxItems) {\n            this.history.splice(0, this.history.length + 1 - this.maxItems)\n          }\n        }\n        this.history.push ({\n          time: new Date(),\n          event,\n          element,\n          prestances,\n        })\n        this.events.change(this)\n      }\n    }\n  \n    clear () {\n      this.history = []\n      this.events.change(this)\n    }\n  \n    getConsumedMemory () {\n      return MemoryBlock.calculate(this.history)\n    }\n  \n    getList () {\n      return this.history\n    }\n  \n    toItem (index) {\n      const i = parseInt(index)\n      const item = this.history[i]\n      this.moveHeader(i)\n      console.log('moveHeader', i)\n      this.events.change(this)\n      return item\n    }\n  \n    getItem (index) {\n      return this.history[parseInt(index)]\n    }\n\n    moveHeader (index) {\n      this.history.length = index+1\n    }\n  \n    getMoment(time) {\n      return this.history.find((item) => item.time === time)\n    }\n  }\n\n  export default History\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./panel/script/History.js\n// module id = 1\n// module chunks = 0","import History from './History'\nimport Connection from './Connection'\nimport History from './History'\nimport HistoryPanel from './HistoryPanel'\nimport Panel from './Panel'\nimport PrestacesPanel from './PrestacesPanel'\n\nconst history = new History()\nconst historyPanel = new HistoryPanel(history)\nconst prestancesPanel = new PrestacesPanel()\nconst connection = new Connection()\nconst panel = new Panel()\n\nhistory.registerEvent('change', historyPanel.update.bind(historyPanel))\nhistory.registerEvent('change', panel.updateMemoryField.bind(panel))\n\nconnection.registerEvent('initValues', prestancesPanel.drawTable.bind(prestancesPanel))\nconnection.registerEvent('updateValues', prestancesPanel.updateValues.bind(prestancesPanel))\nconnection.registerEvent('reciveMark', panel.changeMark.bind(panel))\nconnection.registerEvent('reciveMark', panel.changeMark.bind(panel))\nconnection.registerEvent('onReceiveUpdate', history.add.bind(history))\n\npanel.registerEvent('onDeleteHistory', history.clear.bind(history))\npanel.registerEvent('onDeleteHistory', connection.deleteHistory.bind(connection))\npanel.registerEvent('onApply', connection.applyPrestances.bind(connection))\npanel.registerEvent('onActiveMarksChange', connection.activeMarks.bind(connection))\npanel.registerEvent('onMarkChange', connection.sendMark.bind(connection))\npanel.registerEvent('onConnect', connection.sendConnect.bind(connection))\n\nhistoryPanel.registerEvent('onApply', connection.applyPrestances.bind(connection))\nhistoryPanel.registerEvent('onRestore', connection.restoreScores.bind(connection))\n\nconnection.begin()\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./panel/script/index.js\n// module id = 2\n// module chunks = 0","class MemoryBlock {\n    static sizeOf(obj) {\n        let bytes = 0\n        if(obj !== null && obj !== undefined) {\n            switch(typeof obj) {\n            case 'number':\n                bytes += 8\n                break\n            case 'string':\n                bytes += obj.length * 2\n                break\n            case 'boolean':\n                bytes += 4\n                break\n            case 'object':\n                const objClass = Object.prototype.toString.call(obj).slice(8, -1)\n                if(objClass === 'Object' || objClass === 'Array') {\n                    for(const key in obj) {\n                        if(!obj.hasOwnProperty(key)) continue\n                        bytes += MemoryBlock.sizeOf(obj[key])\n                    }\n                } else bytes += obj.toString().length * 2\n                break\n            }\n        }\n        return bytes\n    }\n  \n    static formatByteSize(bytes) {\n        if(bytes < 1024) return bytes + \" bytes\"\n        else if(bytes < 1048576) return(bytes / 1024).toFixed(3) + \" KiB\"\n        else if(bytes < 1073741824) return(bytes / 1048576).toFixed(3) + \" MiB\"\n        else return(bytes / 1073741824).toFixed(3) + \" GiB\"\n    }\n  \n    static calculate (obj) {\n        const size = MemoryBlock.sizeOf(obj)\n        return MemoryBlock.formatByteSize(size)\n    }\n}\n\nexport default MemoryBlock\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./panel/script/MemoryBlock.js\n// module id = 3\n// module chunks = 0","\nimport EventDispatcher from './EventDispatcher'\n\nclass Connection extends EventDispatcher {\n    constructor() {\n        super()\n        this.tabId = chrome.devtools.inspectedWindow.tabId\n        this.init  = false\n        this.port = chrome.runtime.connect(null, { name: 'panel' })\n        this.updating = false\n        this.events = {\n            updateValues: () => {},\n            initValues: () => {},\n            reciveMark: () => {},\n            onReceiveUpdate: () => {},\n        }\n\n        this.port.onMessage.addListener((message) => {\n            if (message.target !== 'panel') {\n              return\n            }\n            switch(message.action) {\n              case 'aie-update':\n                this.receiveUpdate(message)\n                break\n              case 'aie-mark':\n                this.events.reciveMark (message.name, true)\n                break\n              case 'aie-unmark':\n                this.events.reciveMark (message.name, false)\n                break\n            }\n        })\n    }\n\n    begin () {\n        this.post({ action: 'init' })\n    }\n\n    post(message) {\n        message.tabId = this.tabId\n        message.target = 'content'\n        this.port.postMessage(message)\n    }   \n\n    send(message) {\n        message.tabId = this.tabId\n        message.target = 'content'\n        chrome.runtime.sendMessage(message)\n    }      \n\n    receiveUpdate ({ detail: detailJSON }) {\n        if (this.updating || !detailJSON) {\n          return\n        }\n        \n        this.updating = true\n        const { prestances, event, element } = JSON.parse(detailJSON)\n        \n        this.events.onReceiveUpdate({\n            event,\n            prestances,\n            element,\n        })\n        \n        if (this.init == false) {\n          this.init = true\n          this.events.initValues(prestances)\n        } else {\n          this.events.updateValues(prestances)\n        }\n        this.updating = false\n    }\n\n    sendMark ({ name, value }) {\n        this.send({\n            action: value ? 'aie-mark' : 'aie-unmark',\n            name: name,\n        })\n    }\n\n    sendConnect () {\n        this.send({\n            action: 'aie-connect',\n            name: name,\n        })\n    }\n\n    restoreScores (prestances = null) {\n        this.send({\n            action: 'aie-restore',\n            prestances,\n        })\n    }\n\n    applyPrestances (prestances = null) {\n        this.send({\n            action: 'aie-apply',\n            prestances,\n        })\n    }\n\n    activeMarks (value) {\n        this.send({\n            action: value? 'aie-active-mark' : 'aie-unactive-mark',\n        })\n    }\n\n    deleteHistory() {\n        this.send({\n            action: 'aie-trash',\n        })\n    }\n      \n}\n\nexport default Connection\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./panel/script/Connection.js\n// module id = 4\n// module chunks = 0","import EventDispatcher from './EventDispatcher'\n\nclass HistoryPanel extends EventDispatcher {\n    constructor (history) {    \n      super()  \n      this.templateTimemachine = document.getElementById('timemachine-template').innerHTML\n      this.content = document.getElementById('timemachine')\n      this.history = history\n      this.events = {\n        onApply: () => {},\n        onRestore: () => {},\n      }\n\n      document.addEventListener('click', (e) => {\n        const element = e.srcElement\n        if (element && element.hasAttribute('aie-history-restore-index')) {\n          const { prestances } = this.history.toItem(element.getAttribute('aie-history-restore-index'))\n          this.events.onRestore(prestances)\n        }\n        if (element && element.hasAttribute('aie-history-apply-index')) {\n          const { prestances } = this.history.getItem(element.getAttribute('aie-history-apply-index'))\n          this.events.onApply(prestances)\n        }\n      }, false)\n    }\n\n    generateHistoryItem ({index, event, element, time}) {\n      let htmlCode = this.templateTimemachine.replace(/{index}/g, index)\n      htmlCode = htmlCode.replace(/{event}/g, event)\n      htmlCode = htmlCode.replace(/{element}/g, element)\n      htmlCode = htmlCode.replace(/{name}/g, name)\n      htmlCode = htmlCode.replace(/{time}/i, time.toTimeString())\n      return htmlCode\n    }\n\n\n    update () {\n      this.content.innerHTML = this.history.getList().map(({time, event, element}, index) => this.generateHistoryItem({index, element, event, time})).join('')\n    }\n}\n\nexport default HistoryPanel\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./panel/script/HistoryPanel.js\n// module id = 5\n// module chunks = 0","import EventDispatcher from './EventDispatcher'\n\nclass Panel extends EventDispatcher {\n    constructor() {\n        super()\n        this.events = {\n            onMarkChange: () => {},\n            onDeleteHistory: () => {},\n            onConnect: () => {},\n            onActiveMarksChange: () => {},\n            onApply: () => {},\n        }\n\n        document.addEventListener('mouseover', (e) => this.onMouseOver(e.srcElement))\n        document.addEventListener('mouseout', (e) => this.onMouseOut(e.srcElement))\n          \n        document.getElementById('active-marks-checker').addEventListener('change', (e) =>\n            this.events.onActiveMarksChange(e.srcElement.checked ? 'aie-active-mark' : 'aie-unactive-mark')\n          , false)\n          \n        document.getElementById('toolbar-delete').addEventListener('click', (e) => {\n            this.events.onDeleteHistory()\n          }, false)\n        document.getElementById('toolbar-connect').addEventListener('click', (e) => {\n            this.events.onConnect()\n          }, false)\n          \n        document.getElementById('toolbar-apply').addEventListener('click', (e) => {\n            this.events.onApply()\n          }, false)\n          \n          document.getElementById('timemachine-checker').addEventListener('change', (e) => {\n            if (e.srcElement.checked) {\n              document.getElementById('timemachine').classList.remove('hide')\n              document.getElementById('container').classList.add('hide')\n            } else {\n              document.getElementById('timemachine').classList.add('hide')\n              document.getElementById('container').classList.remove('hide')\n            }\n          }, false)\n    }\n\n    updateMemoryField(history) {\n        document.getElementById('memorySize').innerHTML = history.getConsumedMemory()\n    }\n\n    changeMark (name, value) {\n        const el = document.getElementById('label_' + name)\n        if (el) {\n            value ? el.classList.add('mark') : el.classList.remove('mark')\n        }\n    }\n\n    onMouseOver (element) {\n        if (element.hasAttribute('aie-name')) {\n            this.events.onMarkChange ({name: element.getAttribute('aie-name'), value: true})\n        }\n    }\n\n    onMouseOut (element) {\n        if (element.hasAttribute('aie-name')) {\n            this.events.onMarkChange ({ name: element.getAttribute('aie-name'), value: false })\n        }\n    }\n}\n\nexport default Panel\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./panel/script/Panel.js\n// module id = 6\n// module chunks = 0","\nclass PrestacesPanel {\n    constructor () {\n        this.templateItem = document.getElementById('item-template').innerHTML\n        this.templateList = document.getElementById('list-template').innerHTML\n        this.container = document.getElementById('container')\n        this.loader = document.getElementById('loader')\n    }\n    generateList (list, id) {\n        if (!list || list.length === 0) {\n          return ''\n        }\n        let htmlCode = this.templateList.replace(\n          /{items}/,\n          list.map((item, key) => this.generateItem(item, `${id}_${key}`)).join('')\n        )\n        return htmlCode\n      }\n      \n    getPrestace (prestance) {\n        return prestance ? prestance.toFixed(4) : ''\n    }\n      \n    generateItem ({ name, prestance, children}, id) {\n        let htmlCode = this.templateItem.replace(/{id}/g, name)\n        htmlCode = htmlCode.replace(/{name}/g, name)\n        htmlCode = htmlCode.replace(/{value}/i, this.getPrestace(prestance))\n        htmlCode = htmlCode.replace(\n          /{content}/i,\n          this.generateList(children, id))\n      \n        return htmlCode\n      }\n      \n    drawTable(prestances) {\n        if (prestances) {\n          loader.classList.add('hide')\n          this.container.innerHTML = this.generateList(prestances, '0')\n        }\n      }\n      \n    flatTree (list) {\n        if (!list || list.length === 0) {\n          return []\n        }\n        if (list) {\n          const map = list.reduce((prev, {name, prestance, children}) => ([\n            ...prev,\n            ...this.flatTree(children),\n            { name, prestance },\n          ]), [])\n          return map\n        }\n      }\n      \n    updateValues(list) {\n        if (!list || list.length === 0) {\n          return null\n        }\n        const valueList = this.flatTree(list)\n        const minVal = valueList.map(a => a.prestance).reduce((a, b) => Math.min(a, b), 1)\n        const maxVal = valueList.map(a => a.prestance).reduce((a, b) => Math.max(a, b), 0)\n        if (list) {\n          valueList.map(({name, prestance}) => {\n            const el = document.getElementById(`value_${name}`)\n            const arrowEl = document.getElementById(`arrow_${name}`)\n            if (el) {\n              const color = 'rgb(100, 100, ' + parseInt(255*(prestance-minVal)/(maxVal-minVal)) + ')'\n              el.style.color = color\n              arrowEl.style.color = color\n              const prevValue = parseFloat(el.innerHTML)\n              if (prevValue > prestance) {\n                arrowEl.innerHTML = '&darr;'\n              }\n              if (prevValue < prestance) {\n                arrowEl.innerHTML = '&uarr;'\n              }\n              el.innerHTML = this.getPrestace(prestance)\n            }\n          })\n        }\n      }\n}\n\nexport default PrestacesPanel\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./panel/script/PrestacesPanel.js\n// module id = 7\n// module chunks = 0"],"sourceRoot":""}